

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Libraries &mdash; dnsprovejs  documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script type="text/javascript" src="_static/jquery.js"></script>
        <script type="text/javascript" src="_static/underscore.js"></script>
        <script type="text/javascript" src="_static/doctools.js"></script>
        <script type="text/javascript" src="_static/language_data.js"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="prev" title="Under the hood" href="underthehood.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="index.html" class="icon icon-home"> dnsprovejs
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="introduction.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="quickstart.html">Quick start</a></li>
<li class="toctree-l1"><a class="reference internal" href="underthehood.html">Under the hood</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Libraries</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#dnsprover">DnsProver</a></li>
<li class="toctree-l2"><a class="reference internal" href="#oracle">Oracle</a></li>
<li class="toctree-l2"><a class="reference internal" href="#proof">Proof</a></li>
<li class="toctree-l2"><a class="reference internal" href="#dnsresult">DnsResult</a></li>
</ul>
</li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">dnsprovejs</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html">Docs</a> &raquo;</li>
        
      <li>Libraries</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/libraries.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="libraries">
<h1>Libraries<a class="headerlink" href="#libraries" title="Permalink to this headline">¶</a></h1>
<div class="section" id="dnsprover">
<h2>DnsProver<a class="headerlink" href="#dnsprover" title="Permalink to this headline">¶</a></h2>
<p><cite>DnsProver</cite> allows you to lookup a domainname for a given DNS type and returns the DNS record and proofs which you can submit into DNSSEC Oracle.</p>
<dl class="function">
<dt id="DnsProver.lookup">
<code class="descclassname">DnsProver.</code><code class="descname">lookup</code><span class="sig-paren">(</span><em>type</em>, <em>query</em><span class="sig-paren">)</span><a class="headerlink" href="#DnsProver.lookup" title="Permalink to this definition">¶</a></dt>
<dd><p>lookup takes DNS record type and name and returns <cite>DnsResult</cite> object.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Arguments:</th><td class="field-body"><ul class="first simple">
<li><strong>type</strong> (<em>string</em>) – eg: TXT</li>
<li><strong>query</strong> (<em>string</em>) – eg: _ens.yourdomain.xyz</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"><strong>Object</strong> – DnsResult - contains list of results retrieved from DNS record and proofs which are constructed from the record and used to submit into DNSSEC Oracle</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="DnsProver.getOracle">
<code class="descclassname">DnsProver.</code><code class="descname">getOracle</code><span class="sig-paren">(</span><em>address</em><span class="sig-paren">)</span><a class="headerlink" href="#DnsProver.getOracle" title="Permalink to this definition">¶</a></dt>
<dd><p>getOracle returns Oracle object</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Arguments:</th><td class="field-body"><ul class="first simple">
<li><strong>address</strong> (<em>string</em>) – DNSSEC Oracle contract address</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"><strong>Object</strong> – Oracle - allows you to call DNSSEC oracle functions</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
<div class="section" id="oracle">
<h2>Oracle<a class="headerlink" href="#oracle" title="Permalink to this headline">¶</a></h2>
<p><cite>Oracle</cite> interacts with DNSSEC Oracle smart contract.</p>
<dl class="function">
<dt id="Oracle.knownProof">
<code class="descclassname">Oracle.</code><code class="descname">knownProof</code><span class="sig-paren">(</span><em>proof</em><span class="sig-paren">)</span><a class="headerlink" href="#Oracle.knownProof" title="Permalink to this definition">¶</a></dt>
<dd><p>kownProof</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Arguments:</th><td class="field-body"><ul class="first simple">
<li><strong>proof</strong> (<em>Object</em>) – </li>
<li><strong>proof.name</strong> (<em>string</em>) – eg ‘ethlab.xyz’</li>
<li><strong>proof.type</strong> (<em>type</em>) – eg ‘TXT’</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"><strong>Object</strong> – oracle_proof - contains list of results retrieved from DNS record and proofs</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="Oracle.submitAll">
<code class="descclassname">Oracle.</code><code class="descname">submitAll</code><span class="sig-paren">(</span><em>result</em>, <em>params</em><span class="sig-paren">)</span><a class="headerlink" href="#Oracle.submitAll" title="Permalink to this definition">¶</a></dt>
<dd><p>submitAll submits all required proofs into the DNSSEC oracle as one transaction in a batch.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Arguments:</th><td class="field-body"><ul class="first last simple">
<li><strong>result</strong> (<em>Object</em>) – </li>
<li><strong>params</strong> (<em>Object</em>) – from, gas, gasPrice, etc</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="Oracle.getAllProofs">
<code class="descclassname">Oracle.</code><code class="descname">getAllProofs</code><span class="sig-paren">(</span><em>result</em><span class="sig-paren">)</span><a class="headerlink" href="#Oracle.getAllProofs" title="Permalink to this definition">¶</a></dt>
<dd><p>getAllProofs returns all the proofs needs to be submitted into DNSSEC Oracle.
It traverses from the leaf of the chain of proof to check if proof in DNSSEC Oracle
and the one from DNS record matches with valid inception value.
This function is used so that it can pass the necessary proof to <cite>dnsregistrar.proveAndClaim</cite> function.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Arguments:</th><td class="field-body"><ul class="first simple">
<li><strong>result</strong> (<em>Object</em>) – </li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>string</strong> – data</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"><strong>Object</strong> – prevProof</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="Oracle.submitProof">
<code class="descclassname">Oracle.</code><code class="descname">submitProof</code><span class="sig-paren">(</span><em>proof</em>, <em>prevProof</em>, <em>params</em><span class="sig-paren">)</span><a class="headerlink" href="#Oracle.submitProof" title="Permalink to this definition">¶</a></dt>
<dd><p>submitProof submits a proof to Oracle contract.
If <cite>prevProof</cite> is <cite>null</cite>, the oracle contract uses hard-coded root anchor proof to validate the validity of the proof given.
<cite>params</cite> is used to pass any params to be sent to transaction, such as <cite>{from:address}</cite>.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Arguments:</th><td class="field-body"><ul class="first simple">
<li><strong>proof</strong> (<em>Object</em>) – </li>
<li><strong>prevProof</strong> (<em>Object</em>) – </li>
<li><strong>params</strong> (<em>Object</em>) – from, gas, gasPrice, etc</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"><strong>boolean</strong> – success - returns true unless transaction fails</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="Oracle.deleteProof">
<code class="descclassname">Oracle.</code><code class="descname">deleteProof</code><span class="sig-paren">(</span><em>type</em>, <em>name</em>, <em>proof</em>, <em>prevProof</em>, <em>params</em><span class="sig-paren">)</span><a class="headerlink" href="#Oracle.deleteProof" title="Permalink to this definition">¶</a></dt>
<dd><p>deleteProof deletes a proof</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Arguments:</th><td class="field-body"><ul class="first last simple">
<li><strong>type</strong> (<em>string</em>) – eg: TXT</li>
<li><strong>name</strong> (<em>string</em>) – eg: _ens.matoken.xyz</li>
<li><strong>proof</strong> (<em>string</em>) – </li>
<li><strong>prevProof</strong> (<em>string</em>) – </li>
<li><strong>params</strong> (<em>Object</em>) – from, gas, gasPrice, etc</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="OracleProof">
<code class="descname">OracleProof</code><span class="sig-paren">(</span><em>proof</em><span class="sig-paren">)</span><a class="headerlink" href="#OracleProof" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Arguments:</th><td class="field-body"><ul class="first last simple">
<li><strong>proof</strong> (<em>Object</em>) – </li>
<li><strong>proof.inception</strong> (<em>number</em>) – time the signature was generated</li>
<li><strong>proof.inserted</strong> (<em>number</em>) – time the record was inserted into DNSSEC oracle</li>
<li><strong>proof.hash</strong> (<em>string</em>) – hash of proof stored in DNSSEC oracle</li>
<li><strong>proof.hashToProve</strong> (<em>string</em>) – hash of proof constructed from DNS record</li>
<li><strong>proof.validInception</strong> (<em>boolean</em>) – true if inception in DNSSEC oracle is older than the one from DNS record.</li>
<li><strong>proof.matched</strong> (<em>boolean</em>) – true if inception is valid and hash is matched</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
<div class="section" id="proof">
<h2>Proof<a class="headerlink" href="#proof" title="Permalink to this headline">¶</a></h2>
<p><cite>Proof</cite> contains rrset and signature data which is submitted into DNSSEC Oracle.</p>
<dl class="function">
<dt id="Proof">
<code class="descname">Proof</code><span class="sig-paren">(</span><em>name</em>, <em>type</em>, <em>sig</em>, <em>inception</em>, <em>sigwire</em>, <em>rrdata</em><span class="sig-paren">)</span><a class="headerlink" href="#Proof" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Arguments:</th><td class="field-body"><ul class="first last simple">
<li><strong>name</strong> (<em>string</em>) – </li>
<li><strong>type</strong> (<em>string</em>) – </li>
<li><strong>sig</strong> (<em>string</em>) – </li>
<li><strong>inception</strong> (<em>number</em>) – </li>
<li><strong>sigwire</strong> (<em>string</em>) – </li>
<li><strong>rrdata</strong> (<em>string</em>) – </li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="Proof.toSubmit">
<code class="descclassname">Proof.</code><code class="descname">toSubmit</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#Proof.toSubmit" title="Permalink to this definition">¶</a></dt>
<dd><p>toSubmit returns an array consisting of hex string of sigwiredata (concatinatd string of sigwire and rrdata) and its signature</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body"><strong>array</strong> – data</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
<div class="section" id="dnsresult">
<h2>DnsResult<a class="headerlink" href="#dnsresult" title="Permalink to this headline">¶</a></h2>
<p><cite>DnsResult</cite> is an object returned by calling <cite>lookup</cite> function and contains information about the DNS record.</p>
<dl class="function">
<dt id="DnsResult">
<code class="descname">DnsResult</code><span class="sig-paren">(</span><em>dns_result</em><span class="sig-paren">)</span><a class="headerlink" href="#DnsResult" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Arguments:</th><td class="field-body"><ul class="first last simple">
<li><strong>dns_result</strong> (<em>Object</em>) – </li>
<li><strong>dns_result.found</strong> (<em>boolean</em>) – true if the given record exists</li>
<li><strong>dns_result.nsec</strong> (<em>boolean</em>) – true if the given record does not exist and NSEC/NSEC3 is enabled</li>
<li><strong>dns_result.results</strong> (<em>Array</em>) – an array of SignedSet containing name, signature, and rrs</li>
<li><strong>dns_result.proofs</strong> (<em>Array</em>) – an array of proofs constructed using results</li>
<li><strong>dns_result.lastProof</strong> (<em>string</em>) – the last proof which you submit into Oracle contruct</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
      
        <a href="underthehood.html" class="btn btn-neutral float-left" title="Under the hood" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2018, Makoto Inoue

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>